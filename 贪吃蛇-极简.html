<!DOCTYPE html>
<html lang="zh-cn">

<head>
    <meta charset="UTF-8">
    <title>贪吃蛇小游戏</title>
    <style>
        body {
            min-height: 100vh;
            background:
                radial-gradient(circle at 80% 20%, rgba(41, 121, 255, 0.18) 0, transparent 40%),
                radial-gradient(circle at 20% 80%, rgba(0, 230, 118, 0.13) 0, transparent 50%),
                linear-gradient(135deg, #232526 0%, #414345 100%);
            color: #fff;
            font-family: 'Segoe UI', 'PingFang SC', 'Microsoft YaHei', sans-serif;
        }

        #snake-canvas {
            background: rgba(30, 32, 34, 0.97);
            display: block;
            margin: 36px auto 18px auto;
            border-radius: 22px;
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.22);
            border: 3px solid #00e676;
            transition: box-shadow 0.3s;
        }

        #score {
            font-size: 22px;
            text-align: center;
            margin-top: 18px;
            letter-spacing: 2px;
            color: #FFD600;
            text-shadow: 0 2px 8px #222;
        }

        #controls {
            text-align: center;
            margin-top: 18px;
        }

        .instructions {
            max-width: 420px;
            margin: 36px auto 0 auto;
            background: linear-gradient(120deg, rgba(41, 121, 255, 0.18) 0%, rgba(0, 230, 118, 0.13) 100%);
            border-radius: 22px;
            box-shadow: 0 4px 32px 0 rgba(41, 121, 255, 0.10);
            padding: 28px 24px 18px 24px;
            text-align: center;
            font-size: 1.18em;
            color: #fff;
            letter-spacing: 1.3px;
            border: 1.5px solid rgba(41, 121, 255, 0.13);
            backdrop-filter: blur(4px) saturate(1.2);
            /* 兼容性 */
            -webkit-backdrop-filter: blur(4px) saturate(1.2);
            transition: box-shadow 0.3s, background 0.3s;
        }

        .instructions b {
            color: #FFD600;
            font-size: 1.08em;
            letter-spacing: 2px;
        }

        .instructions kbd {
            background: #232526cc;
            color: #FFD600;
            border-radius: 6px;
            padding: 2px 8px;
            margin: 0 2px;
            font-size: 1em;
            font-family: inherit;
            border: 1px solid #FFD60044;
            box-shadow: 0 1px 4px #2223;
        }

        button {
            font-size: 18px;
            margin: 0 14px;
            padding: 10px 28px;
            border-radius: 24px;
            border: none;
            background: linear-gradient(90deg, #00e676 0%, #2979ff 100%);
            color: #fff;
            font-weight: bold;
            box-shadow: 0 2px 8px #222;
            cursor: pointer;
            transition: background 0.2s, transform 0.2s;
        }

        button:hover {
            background: linear-gradient(90deg, #2979ff 0%, #00e676 100%);
            transform: scale(1.07);
        }

        #game-over {
            color: #ff1744;
            font-weight: bold;
            text-align: center;
            display: none;
            margin-top: 18px;
            font-size: 28px;
            letter-spacing: 2px;
            text-shadow: 0 2px 12px #000, 0 0px 40px #ff1744;
            animation: shake 0.5s;
        }

        @keyframes shake {
            0% {
                transform: translateX(0);
            }

            20% {
                transform: translateX(-8px);
            }

            40% {
                transform: translateX(8px);
            }

            60% {
                transform: translateX(-8px);
            }

            80% {
                transform: translateX(8px);
            }

            100% {
                transform: translateX(0);
            }
        }
    </style>
</head>

<body>
    <h1 style="text-align:center;">贪吃蛇小游戏</h1>
    <canvas id="snake-canvas" width="400" height="400"></canvas>
    <div id="score">得分:0</div>
    <div id="controls">
        <button onclick="startGame()">开始游戏</button>
        <button onclick="pauseGame()" id="pauseBtn">暂停</button>
    </div>
    <div class="instructions">
        <b>操作说明</b><br>
        <kbd>↑</kbd> <kbd>↓</kbd> <kbd>←</kbd> <kbd>→</kbd> 或 <kbd>W</kbd> <kbd>A</kbd> <kbd>S</kbd> <kbd>D</kbd> 控制方向
    </div>
    <div id="game-over" style="color:red;font-weight:bold;text-align:center;display:none;margin-top:10px;">游戏结束！</div>
    <script>
        const canvas = document.getElementById('snake-canvas');
        const ctx = canvas.getContext('2d');
        const gridSize = 20; // 每格大小
        const tileCount = canvas.width / gridSize;
        let snake, direction, food, score, gameOver, paused, animationId;

        function resetGame() {
            snake = [{ x: 8, y: 10 }, { x: 7, y: 10 }, { x: 6, y: 10 }];
            direction = { x: 1, y: 0 };
            food = spawnFood();
            score = 0;
            gameOver = false;
            paused = false;
            document.getElementById('game-over').style.display = 'none';
            document.getElementById('score').innerText = '得分：0';
        }

        function spawnFood() {
            let pos;
            do {
                pos = {
                    x: Math.floor(Math.random() * tileCount),
                    y: Math.floor(Math.random() * tileCount)
                };
            } while (snake.some(seg => seg.x === pos.x && seg.y === pos.y));
            return pos;
        }

        function draw() {
            // 渐变背景
            const grad = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
            grad.addColorStop(0, "#232526");
            grad.addColorStop(1, "#2979ff");
            ctx.fillStyle = grad;
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // 画食物（圆形带阴影）
            ctx.save();
            ctx.shadowColor = "#FFD600";
            ctx.shadowBlur = 18;
            ctx.beginPath();
            ctx.arc(
                food.x * gridSize + gridSize / 2,
                food.y * gridSize + gridSize / 2,
                gridSize * 0.4,
                0, Math.PI * 2
            );
            ctx.fillStyle = "#FFD600";
            ctx.fill();
            ctx.restore();

            // 画蛇（圆角方块+渐变+阴影）
            snake.forEach((seg, i) => {
                ctx.save();
                ctx.shadowColor = i === 0 ? "#00e676" : "#2979ff";
                ctx.shadowBlur = i === 0 ? 16 : 8;
                ctx.beginPath();
                ctx.moveTo(seg.x * gridSize + 5, seg.y * gridSize);
                ctx.arcTo(seg.x * gridSize + gridSize, seg.y * gridSize, seg.x * gridSize + gridSize, seg.y * gridSize + gridSize, 8);
                ctx.arcTo(seg.x * gridSize + gridSize, seg.y * gridSize + gridSize, seg.x * gridSize, seg.y * gridSize + gridSize, 8);
                ctx.arcTo(seg.x * gridSize, seg.y * gridSize + gridSize, seg.x * gridSize, seg.y * gridSize, 8);
                ctx.arcTo(seg.x * gridSize, seg.y * gridSize, seg.x * gridSize + gridSize, seg.y * gridSize, 8);
                ctx.closePath();
                if (i === 0) {
                    // 蛇头渐变
                    const headGrad = ctx.createLinearGradient(
                        seg.x * gridSize, seg.y * gridSize,
                        seg.x * gridSize + gridSize, seg.y * gridSize + gridSize
                    );
                    headGrad.addColorStop(0, "#00e676");
                    headGrad.addColorStop(1, "#2979ff");
                    ctx.fillStyle = headGrad;
                } else {
                    ctx.fillStyle = "#2979ff";
                }
                ctx.fill();
                ctx.restore();

                // 蛇头加眼睛
                if (i === 0) {
                    ctx.save();
                    ctx.fillStyle = "#fff";
                    let eyeOffsetX = direction.x === 1 ? 6 : direction.x === -1 ? -6 : 0;
                    let eyeOffsetY = direction.y === 1 ? 6 : direction.y === -1 ? -6 : 0;
                    ctx.beginPath();
                    ctx.arc(seg.x * gridSize + gridSize / 2 + eyeOffsetX, seg.y * gridSize + gridSize / 2 + eyeOffsetY - 3, 2.5, 0, Math.PI * 2);
                    ctx.arc(seg.x * gridSize + gridSize / 2 + eyeOffsetX, seg.y * gridSize + gridSize / 2 + eyeOffsetY + 3, 2.5, 0, Math.PI * 2);
                    ctx.fill();
                    ctx.restore();
                }
            });
        }

        function update() {
            if (gameOver || paused) return;
            // 移动蛇
            const head = { x: snake[0].x + direction.x, y: snake[0].y + direction.y };

            // 撞墙或撞自己
            if (
                head.x < 0 || head.x >= tileCount ||
                head.y < 0 || head.y >= tileCount ||
                snake.some(seg => seg.x === head.x && seg.y === head.y)
            ) {
                gameOver = true;
                showGameOver();
                return;
            }

            snake.unshift(head);

            // 吃到食物
            if (head.x === food.x && head.y === food.y) {
                score += 1;
                document.getElementById('score').innerText = '得分：' + score;
                food = spawnFood();
            } else {
                snake.pop();
            }

            draw();
            animationId = setTimeout(update, 120);
        }

        document.addEventListener('keydown', e => {
            if (gameOver || paused) return;
            if ((e.key === 'ArrowUp' || e.key === 'w' || e.key === 'W') && direction.y !== 1) {
                direction = { x: 0, y: -1 };
            } else if ((e.key === 'ArrowDown' || e.key === 's' || e.key === 'S') && direction.y !== -1) {
                direction = { x: 0, y: 1 };
            } else if ((e.key === 'ArrowLeft' || e.key === 'a' || e.key === 'A') && direction.x !== 1) {
                direction = { x: -1, y: 0 };
            } else if ((e.key === 'ArrowRight' || e.key === 'd' || e.key === 'D') && direction.x !== -1) {
                direction = { x: 1, y: 0 };
            }
        });

        function startGame() {
            resetGame();
            draw();
            clearTimeout(animationId);
            update();
            document.getElementById('pauseBtn').innerText = '暂停';
        }

        function pauseGame() {
            if (gameOver) return;
            paused = !paused;
            const btn = document.getElementById('pauseBtn');
            if (paused) {
                btn.innerText = '继续';
                clearTimeout(animationId);
            } else {
                btn.innerText = '暂停';
                update();
            }
        }

        function showGameOver() {
            document.getElementById('game-over').style.display = 'block';
            clearTimeout(animationId);
        }

        // 初始化
        resetGame();
        draw();
    </script>
</body>

</html>